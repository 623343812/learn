<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>calculator</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="calculator">
        <p>
            <input type="text" class="formerInput" value='1'>
            <span class='sign'>+</span>
            <input type="text" class="laterInput" value='1'>
            <span>=</span>
            <span class="resultOutput">2</span>
        </p>
        <p>
            <!--  <input type="button" value="+" onclick='addHandler();'>
            <input type="button" value="-" onclick='subtractHandler();'>
            <input type="button" value="*" onclick='multiplyHandler();'>
            <input type="button" value="/" onclick='divideHandler();'> -->
            <input type="button" value="+" class='btn' title='add'>
            <input type="button" value="-" class='btn' title='subtract'>
            <input type="button" value="*" class='btn' title='multiply'>
            <input type="button" value="/" class='btn' title='divide'>
        </p>
    </div>
    <script>
        //获取元素

        //管理改进
        var wrapElem = document.querySelector('#calculator');
        var calculatorElem = {
            formerInput: wrapElem.querySelector('.formerInput'),
            sign: wrapElem.querySelector('.sign'),
            laterInput: wrapElem.querySelector('.laterInput'),
            resultOutput: wrapElem.querySelector('.resultOutput'),
            btns: wrapElem.querySelectorAll('.btn')
        }

        //绑定事件
        each(calculatorElem.btns, function (index, elem) {
            elem.onclick = function () {
                switch (this.title) {
                    case 'add':
                        addHandler();
                        break;
                    case 'subtract':
                        subtractHandler();
                        break;
                    case 'multiply':
                        multiplyHandler();
                        break;
                    case 'divide':
                        divideHandler();
                        break;
                }
            };
        });
        // btns[0].onclick = addHandler;
        // btns[1].onclick = subtractHandler;
        // btns[2].onclick = multiplyHandler;
        // btns[3].onclick = divideHandler;
        //循环绑定事件


        //遍历 
        function each(array, fn) {
            for (var i = 0; i < array.length; i++) {
                fn(i, array[i]);
            }
        }

        function updateSign(symbol) {
            calculatorElem.sign.innerHTML = symbol;
        }
        //管理代码
        var operation = {
             add:function(num1, num2) {
                return +num1 + +num2;
            },

             subtract:function(num1, num2) {
                return num1 - num2;
            },

             multiply:function(num1, num2) {
                return num1 * num2;
            },

             divide:function(num1, num2) {
                return num1 / num2;
            }
        }

        //结果
        function outputResult(result) {
            calculatorElem.resultOutput.innerHTML = result;
        }
        //加法
        function addHandler() {
            updateSign('+');
            outputResult(operation.add(calculatorElem.formerInput.value, calculatorElem.laterInput.value));
        }

        //减法
        function subtractHandler() {
            updateSign('-');
            outputResult(operation.subtract(calculatorElem.formerInput.value, calculatorElem.laterInput.value));
        }

        //*
        function multiplyHandler() {
            updateSign('*');
            outputResult(operation.multiply(calculatorElem.formerInput.value, calculatorElem.laterInput.value));
        }

        // /
        function divideHandler() {
            updateSign('/');
            outputResult(operation.divide(calculatorElem.formerInput.value, calculatorElem.laterInput.value));
        }
    </script>
</body>

</html>